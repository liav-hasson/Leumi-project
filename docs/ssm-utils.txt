# Get all instance IDs with names and states
aws ec2 describe-instances \
    --query 'Reservations[].Instances[].[InstanceId,Tags[?Key==`Name`].Value|[0],State.Name,PrivateIpAddress]' \
    --output table


# Jenkins - Web UI Access (http://localhost:8080)
    aws ssm start-session \
        --target $(aws ec2 describe-instances \
            --filters "Name=tag:Name,Values=devops-quiz-jenkins" "Name=instance-state-name,Values=running" \
            --query 'Reservations[0].Instances[0].InstanceId' --output text) \
        --document-name AWS-StartPortForwardingSession \
        --parameters '{"portNumber":["8080"],"localPortNumber":["8080"]}'


# Jenkins - direct connection (then run: sudo -s && cd /home/ubuntu)
aws ssm start-session \
    --target $(aws ec2 describe-instances \
        --filters "Name=tag:Name,Values=devops-quiz-jenkins" "Name=instance-state-name,Values=running" \
        --query 'Reservations[0].Instances[0].InstanceId' --output text)